# Change Instance Type Using Terraform

During the migration process, the Nautilus DevOps team created several EC2 instances in different regions. They are currently in the process of identifying the correct resources and utilization and are making continuous changes to ensure optimal resource utilization. Recently, they discovered that one of the EC2 instances was underutilized, prompting them to decide to change the instance type. Please make sure the `Status` check is completed (if it's still in `Initializing` state) before making any changes to the instance.

- Change the instance type from `t2.micro` to `t2.nano` for `xfusion-ec2` instance using terraform.
- Make sure the EC2 instance `xfusion-ec2` is in running state after the change.

The Terraform working directory is `/home/bob/terraform`. Create the `main.tf` file (do not create a different `.tf` file) to accomplish this task.

**`/home/bob/terraform/main.tf`** 

**Existing configuration:**

```HCL
# Provision EC2 instance
resource "aws_instance" "ec2" {
  ami           = "ami-0c101f26f147fa7fd"
  instance_type = "t2.micro"
  subnet_id     = ""
  vpc_security_group_ids = [
    "sg-4fd85ddd15dff7b35"
  ]

  tags = {
    Name = "xfusion-ec2"
  }
}
```

**Updated configuration:**

```HCL
# Update EC2 instance to t2.nano
resource "aws_instance" "ec2" {
  ami           = "ami-0c101f26f147fa7fd"
  instance_type = "t2.nano"
  subnet_id     = ""
  vpc_security_group_ids = [
    "sg-4fd85ddd15dff7b35"
  ]

  tags = {
    Name = "xfusion-ec2"
  }
}
```

## How to apply

```bash
terraform plan
terraform apply -auto-approve
```

## Check instance state

```sh
aws ec2 describe-instances \
  --filters "Name=tag:Name,Values=xfusion-ec2" \
  --query "Reservations[].Instances[].State.Name"
```

**Expected:**

```
[
    "running"
]
```
