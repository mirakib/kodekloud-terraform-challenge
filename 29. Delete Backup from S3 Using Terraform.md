# Delete Backup from S3 Using Terraform

A S3 bucket named `devops-bck-12405` already exists.

1) Copy the contents of `devops-bck-12405` S3 bucket to `/opt/s3-backup/` directory on `terraform-client` host (the landing host once you load this lab).

2) Delete the S3 bucket `devops-bck-12405`.


The Terraform working directory is `/home/bob/terraform`. Create the `main.tf` file (do not create a different `.tf` file) to accomplish this task.

**`/home/bob/terraform/main.tf`** 

```HCL
resource "null_resource" "backup_and_delete_s3_bucket" {

  provisioner "local-exec" {
    command = <<EOF
aws s3 sync s3://devops-bck-12405 /opt/s3-backup/ \
  --endpoint-url=http://aws:4566

aws s3 rb s3://devops-bck-12405 --force \
  --endpoint-url=http://aws:4566
EOF
  }
}
```

## How to apply

```bash
terraform plan
terraform apply -auto-approve
```
